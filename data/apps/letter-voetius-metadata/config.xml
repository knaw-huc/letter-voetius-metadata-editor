<?xml version="1.0" ?>
<config>
  <app>
    <name>letter-generic-metadata</name>
    <title>Letter-generic-metadata Editor</title>
    <def_prof>clarin.eu:cr1:p_1761816151556</def_prof>
    <cmdi_version>1.2</cmdi_version>
    <access>
      <users>./htp</users>
      <read>users</read>
      <write>users</write>
    </access>
    <prof>
      <letter>
        <prof>clarin.eu:cr1:p_1761816151556</prof>
        <title>string((/cmd:CMD/cmd:Components//cmdp:*[empty(cmdp:*)][normalize-space(text())!=''])[1])</title>
        <list>
          <nr>
            <xpath>replace(//*:MdSelfLink,'unl://','')</xpath>
            <label>nr</label>
            <sort>true</sort>
            <filter>true</filter>
          </nr>
          <first>
            <xpath>string((/cmd:CMD/cmd:Components//cmdp:*[empty(cmdp:*)][normalize-space(text())!=''])[1])</xpath>
            <label>NodegoatId</label>
            <sort>true</sort>
            <filter>true</filter>
          </first>
          <sender>
            <xpath>string(//cmdp:Sender/cmdp:SenderObservation/cmdp:senderAsText)</xpath>
            <label>SenderNameAsWritten</label>
            <sort>true</sort>
            <filter>'select'</filter>
          </sender>
          <receiver>
            <xpath>string(//cmdp:Receiver/cmdp:ReceiverObservation/cmdp:receiverAsText)</xpath>
            <label>ReceiverNameAsWritten</label>
            <sort>true</sort>
            <filter>'select'</filter>
          </receiver>
          <letterDate>
            <xpath>string(//cmdp:DateSent/cmdp:DateObservation/cmdp:dateAsWritten)</xpath>
            <label>DateSent</label>
            <sort>true</sort>
            <filter>'select'</filter>
          </letterDate>
        </list>
      </letter>
      <person>
        <prof>clarin.eu:cr1:p_1758888743558</prof>
        <label_en>person-reconstruction</label_en>
        <label_plural_en>person-reconstructions</label_plural_en>
        <title>string((//cmdp:fullName[@xml:lang='en'],//cmdp:fullName)[1])</title>
        <list>
          <nr>
            <xpath>replace(//*:MdSelfLink,'unl://','')</xpath>
            <label>nr</label>
            <sort>true</sort>
            <filter>true</filter>
          </nr>
          <name>
            <xpath>string((//cmdp:fullName[@xml:lang='en'],//cmdp:fullName)[1])</xpath>
            <label>full name</label>
            <sort>true</sort>
            <filter>true</filter>
          </name>
          <dateBirth>
            <xpath>string(//cmdp:PersonData/cmdp:BirthDate/cmdp:DateReconstruction/cmdp:dateStart)</xpath>
            <label>DateBirth</label>
            <sort>true</sort>
            <filter>'select'</filter>
          </dateBirth>
          <dateDeath>
            <xpath>string(//cmdp:PersonData/cmdp:DeathDate/cmdp:DateReconstruction/cmdp:dateStart)</xpath>
            <label>DateDeath</label>
            <sort>true</sort>
            <filter>'select'</filter>
          </dateDeath>
          <identifier2>
            <xpath>string((//cmdp:identifierType[@xml:lang='en'],//cmdp:identifierLabel)[2])</xpath>
            <label>WikidataId</label>
            <sort>true</sort>
            <filter>'select'</filter>
          </identifier2>
        </list>
      </person>
      <place>
        <prof>clarin.eu:cr1:p_1761816151568</prof>
        <label_en>place-reconstruction</label_en>
        <label_plural_en>place-reconstructions</label_plural_en>
        <title>string((//cmdp:authorisedForm[@xml:lang='en'],//cmdp:authorisedForm)[1])</title>
        <list>
          <nr>
            <xpath>replace(//*:MdSelfLink,'unl://','')</xpath>
            <label>nr</label>
            <sort>true</sort>
            <filter>true</filter>
          </nr>
        </list>
      </place>
    </prof>
    <hooks>
      <action>
        <persons>
          <level>app</level>
          <label>persons</label>
          <endpoint>persons</endpoint>
          <hook>persons</hook>
        </persons>
        <letters>
          <level>app</level>
          <label>letters</label>
          <endpoint>letters</endpoint>
          <hook>letters</hook>
        </letters>
        <edges>
          <level>app</level>
          <label>edges</label>
          <endpoint>edges</endpoint>
          <hook>edges</hook>
        </edges>
      </action>
    </hooks>
  </app>
</config>
